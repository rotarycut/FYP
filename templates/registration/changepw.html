<div class="row content-row">
    <div class="col-sm-12" style="text-align: center">
        <div class="row">
            <div class="col-sm-6 col-sm-offset-3">
                <h5 class="form-title" style="font-weight: bold">Change Password</h5>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-8 col-sm-offset-2">
                <h5 class="label-color">You're about the change your password. Enter your old and new password
                    below.</h5>
            </div>
        </div>
        <div class="row subcontent-row">
            <div class="col-sm-6 col-sm-offset-3">
                <h6 class="label-color">[[message.error]]</h6>
            </div>
        </div>
        <div class="row>">
            <div class="col-sm-10 col-sm-offset-3" style="text-align: left; padding-left: 3%">
                <!--<form class="form-horizontal" method="post">-->
                {% csrf_token %}
                {% load widget_tweaks %}

                <form name="changePwForm" novalidate>
                    <div class="row form-group">
                        <!--<div class="input-group">-->
                        <div class="col-sm-4">
                            <label class="control-label">Username:</label></div>
                        <div class="col-sm-3" style="padding-left: 0">
                            <h5>{{ user }}</h5></div>
                        <!--</div>-->
                    </div>

                    <div class="row form-group">

                        <div class="col-sm-4">
                            <label class="control-label">Old Password:</label></div>
                        <div class="col-sm-3" style="padding-left: 0">
                            <input class="form-control" type="password" data-ng-model="fields.oldPassword"
                                   name="oldPassword" autocomplete="off" required>

                            <div ng-show="changePwForm.oldPassword.$invalid && changePwForm.$submitted"
                                 class="help-block">
                                Please enter your old password
                            </div>
                        </div>
                    </div>

                    <div class="row form-group">
                        <div class="col-sm-4">
                            <label class="control-label">New Password:</label></div>
                        <div class="col-sm-3" style="padding-left: 0">
                            <input class="form-control" type="password" data-ng-model="fields.newPassword"
                                   name="newPassword" autocomplete="off" required>

                            <div ng-show="changePwForm.newPassword.$invalid && changePwForm.$submitted"
                                 class="help-block">
                                Please enter your new password
                            </div>
                        </div>
                    </div>

                    <div class="row form-group">
                        <div class="col-sm-4">
                            <label class="control-label">New Password Confirm:</label></div>
                        <div class="col-sm-3" style="padding-left: 0">
                            <input class="form-control" type="password" data-ng-model="fields.confirmNewPassword"
                                   name="confirmNewPassword" autocomplete="off" required>

                            <div ng-show="changePwForm.confirmNewPassword.$invalid && changePwForm.$submitted"
                                 class="help-block">
                                Please confirm your new password
                            </div>
                        </div>
                    </div>

                    <div class="row form-group" style="padding-top: 10px">
                        <div class="col-sm-4 col-sm-offset-2" style="padding-top: 10px">
                            <button class="btn form-submit-btn" type="submit"
                                    ng-click="isFormValid(changePwForm.$valid);">Change
                                Password
                            </button>
                            <!--<input type='submit' value='Submit' />-->
                        </div>
                    </div>

                </form>
                <!--</form>-->
            </div>
        </div>
    </div>
</div>


<script type="text/ng-template" id="confirmPwchangeModal.html">
    <div class="modal-body">
        <h5 class="label-color">[[message.success]]</h5>
    </div>

    <div class="modal-footer">
        <button class="btn form-submit-btn" type="button" ng-click="redirectToLogin()">Ok</button>
    </div>
</script>

<script type="text/ng-template" id="mySuccessModalContent.html">
    <div class="modal-header">
        <h3 class="modal-title">Success</h3>
    </div>

    <div class="modal-body">
        <ul>
            <li>Password changed successfully. Redirecting to home page...</li>
        </ul>
    </div>

    <div class="modal-footer">
        <button class="btn form-submit-btn" type="button" ng-click="redirect();">Ok
        </button>
    </div>
</script>